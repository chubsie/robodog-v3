# 8BitDo Ultimate Controller Configuration for RoboDog V3
# (Registers as Nintendo Pro Controller when connected via Bluetooth)
# 
# ============================================================================
# BUTTON MAPPING (as seen by ROS joy_node)
# ============================================================================
# Index | Button | Physical Location
# ------|--------|------------------
# [0]   | B      | Right side, bottom (green in Nintendo colors)
# [1]   | A      | Right side, right (red in Nintendo colors)
# [2]   | Y      | Right side, left (yellow in Nintendo colors)
# [3]   | X      | Right side, top (blue in Nintendo colors)
# [4]   | L      | Left shoulder bumper
# [5]   | R      | Right shoulder bumper
# [6]   | ZL     | Left trigger
# [7]   | ZR     | Right trigger
# [8]   | -      | Minus button (left of center)
# [9]   | +      | Plus button (right of center)
# [10]  | L-Click| Left stick click
# [11]  | R-Click| Right stick click
# [12]  | Home   | Home button (center)
# [13]  | Capture| Capture button (left of center)
#
# ============================================================================
# AXES MAPPING
# ============================================================================
# Index | Control       | Range
# ------|---------------|------
# [0]   | Left Stick X  | left=-1.0 ... right=+1.0
# [1]   | Left Stick Y  | up=-1.0 ... down=+1.0  (inverted!)
# [2]   | Right Stick X | left=-1.0 ... right=+1.0
# [3]   | Right Stick Y | up=-1.0 ... down=+1.0  (inverted!)
# [4]   | D-Pad X       | left=-1.0 ... right=+1.0
# [5]   | D-Pad Y       | up=-1.0 ... down=+1.0  (inverted!)
#
# ============================================================================
# CURRENT CONTROL SCHEME (RemoteControllerProper.cpp)
# ============================================================================
#
# BUTTONS:
#   B (index 0)     -> Speed DOWN (decrease speed multiplier)
#   A (index 1)     -> Speed UP (increase speed multiplier)
#   Y (index 2)     -> SIT position (lower body to 8cm)
#   X (index 3)     -> STAND position (raise body to 12cm)
#   L (index 4)     -> Toggle Servo Enable/Disable
#   - (index 8)     -> EMERGENCY STOP (disable all movement)
#   + (index 9)     -> Enable movement (resume from emergency stop)
#   L-Click (10)    -> Reset speed to 1.0x
#
# LEFT STICK:
#   Push UP         -> Move body FORWARD (lean forward, legs back)
#   Push DOWN       -> Move body BACKWARD (lean back, legs forward)
#   Push LEFT       -> Strafe LEFT (body shifts left)
#   Push RIGHT      -> Strafe RIGHT (body shifts right)
#
# RIGHT STICK:
#   Push UP         -> RAISE body height
#   Push DOWN       -> LOWER body height
#   Push LEFT/RIGHT -> (Rotation - not fully implemented)
#
# ============================================================================

controller:
  type: "8bitdo_ultimate"
  # Registers as Nintendo Pro Controller
  vendor_id: 0x057e
  product_id: 0x2009

# Button assignments (matching code in RemoteControllerProper.cpp)
buttons:
  # Posture controls
  sit: 2            # Y button - sit/crouch position
  stand: 3          # X button - stand position
  
  # Speed controls
  speed_down: 0     # B button - decrease speed
  speed_up: 1       # A button - increase speed
  speed_reset: 10   # Left stick click - reset speed to 1.0x
  
  # Safety controls
  servo_toggle: 4   # L bumper - toggle servo control on/off
  emergency_stop: 8 # Minus (-) button - disable all movement
  resume: 9         # Plus (+) button - enable movement
  
  # Debug (unused currently)
  debug_toggle: 11  # Right stick click

# Analog stick configuration
sticks:
  deadzone: 0.15    # 15% deadzone to filter noise
  
  # Left stick: Body movement
  left_stick_x: 0   # Strafe left/right
  left_stick_y: 1   # Forward/backward
  
  # Right stick: Body orientation  
  right_stick_x: 2  # Rotation (not implemented)
  right_stick_y: 3  # Height up/down

# D-Pad configuration
dpad:
  x_axis: 4
  y_axis: 5

# IK Movement parameters
movement:
  # Height range (Y axis in leg frame, positive = down toward ground)
  min_height: 0.08    # 8cm - sit/crouch position
  max_height: 0.15    # 15cm - tall stand position  
  default_height: 0.10  # 10cm - normal standing (init position)
  
  # Forward/back lean range (Z axis in leg frame)
  max_forward: 0.05   # 5cm forward lean
  max_backward: 0.05  # 5cm backward lean
  
  # Strafe range (X axis in leg frame)
  max_strafe: 0.03    # 3cm side movement

# Speed settings
speed:
  default: 1.0        # Default speed multiplier
  increment: 0.1      # Speed change per button press
  min: 0.1            # 10% minimum speed
  max: 2.0            # 200% maximum speed

# Node configuration
node:
  name: "robodog_remote_controller"
  joy_topic: "/joy"
  update_rate: 50     # Hz
  log_level: "INFO"

